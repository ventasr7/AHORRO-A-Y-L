<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Ventas</title>
    <!-- Incluyendo Tailwind CSS para un diseño moderno -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilo para ocultar vistas inactivas */
        .view {
            display: none;
        }
        /* Estilo para mostrar la vista activa */
        .view.active {
            display: block;
        }
        /* Pequeña animación para las transiciones */
        .view {
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">

    <div class="container mx-auto p-4 md:p-8">

        <!-- Vista de Login y Registro -->
        <div id="login-view" class="view active">
            <div class="max-w-md mx-auto bg-white rounded-lg shadow-xl overflow-hidden md:max-w-2xl">
                <div class="md:flex">
                    <div class="w-full p-8">
                        <h2 class="text-3xl font-bold text-center text-gray-800 mb-2">Sistema de Ventas</h2>
                        <p class="text-center text-gray-600 mb-8">Bienvenido. Inicia sesión o crea una cuenta.</p>
                        
                        <!-- Formulario de Login -->
                        <form id="login-form">
                            <h3 class="text-xl font-semibold mb-4 text-gray-700">Iniciar Sesión</h3>
                            <div class="mb-4">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="login-code">
                                    Código de Usuario
                                </label>
                                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="login-code" type="text" placeholder="Tu código o usuario">
                            </div>
                            <div class="mb-6">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="login-password">
                                    Contraseña
                                </label>
                                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" id="login-password" type="password" placeholder="******************">
                            </div>
                            <div class="flex items-center justify-between">
                                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit">
                                    Entrar
                                </button>
                            </div>
                        </form>
                        
                        <div class="border-t my-8"></div>

                        <!-- Formulario de Registro -->
                        <form id="register-form">
                            <h3 class="text-xl font-semibold mb-4 text-gray-700">Crear Cuenta</h3>
                             <div class="mb-4">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="register-code">
                                    Nombre de Usuario
                                </label>
                                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="register-code" type="text" placeholder="Crea un nombre de usuario">
                            </div>
                            <div class="mb-6">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="register-password">
                                    Contraseña
                                </label>
                                <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" id="register-password" type="password" placeholder="Crea una contraseña">
                            </div>
                            <div class="flex items-center justify-between">
                                <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="submit">
                                    Registrarse
                                </button>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>

        <!-- Vista del Administrador -->
        <div id="admin-view" class="view">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-800">Panel de Administrador</h1>
                <button id="admin-logout" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Salir</button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Sección para subir artículos -->
                <div class="bg-white p-6 rounded-lg shadow-xl">
                    <h2 id="form-title" class="text-2xl font-semibold mb-4">Subir Nuevo Artículo</h2>
                    <form id="upload-form">
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="product-name">Nombre del Artículo</label>
                            <input class="shadow appearance-none border rounded w-full py-2 px-3" id="product-name" type="text" required>
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="product-desc">Descripción</label>
                            <textarea class="shadow appearance-none border rounded w-full py-2 px-3" id="product-desc" rows="3" required></textarea>
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="product-price">Precio (USD)</label>
                            <input class="shadow appearance-none border rounded w-full py-2 px-3" id="product-price" type="number" step="0.01" required>
                        </div>
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="product-image">Imagen del Artículo</label>
                            <input class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none" id="product-image" type="file" accept="image/*">
                        </div>
                        <p id="image-notice" class="text-xs text-gray-500 mb-4 hidden">Deje el campo de imagen vacío para conservar la actual.</p>
                        <button id="submit-upload-btn" class="w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" type="submit">
                            Subir Producto
                        </button>
                        <button type="button" id="cancel-edit-btn" class="w-full mt-2 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded hidden">Cancelar Edición</button>
                    </form>
                </div>
                <!-- Sección para ver mensajes de clientes -->
                <div class="bg-white p-6 rounded-lg shadow-xl">
                    <h2 class="text-2xl font-semibold mb-4">Mensajes de Clientes</h2>
                    <div id="messages-container" class="space-y-4 max-h-96 overflow-y-auto">
                        <!-- Los mensajes se insertarán aquí -->
                        <p class="text-gray-500">No hay mensajes nuevos.</p>
                    </div>
                </div>
            </div>

            <!-- Nueva sección para administrar publicaciones -->
            <div class="mt-8 bg-white p-6 rounded-lg shadow-xl">
                <h2 class="text-2xl font-semibold mb-4">Administrar Publicaciones</h2>
                <div id="admin-products-list" class="space-y-4 max-h-[40rem] overflow-y-auto pr-4">
                    <!-- Los productos del admin se insertarán aquí -->
                </div>
            </div>
        </div>

        <!-- Vista del Cliente/Usuario -->
        <div id="user-view" class="view">
            <header class="flex justify-between items-center mb-6 pb-4 border-b">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800">Nuestros Productos</h1>
                    <p id="welcome-user" class="text-gray-600"></p>
                </div>
                <div>
                     <button id="cart-button" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mr-4 relative">
                        Carrito <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </button>
                    <button id="user-logout" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">Salir</button>
                </div>
            </header>

            <!-- Contenedor de productos -->
            <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Los productos se insertarán aquí -->
            </div>
            
            <!-- Modal del Carrito -->
            <div id="cart-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center">
                <div class="bg-white rounded-lg shadow-xl w-11/12 md:w-1/2 lg:w-1/3 p-6 relative">
                    <button id="close-cart-modal" class="absolute top-4 right-4 text-2xl font-bold text-gray-600 hover:text-gray-900">&times;</button>
                    <h2 class="text-2xl font-bold mb-4">Tu Carrito</h2>
                    <div id="cart-items" class="mb-4 max-h-64 overflow-y-auto">
                        <!-- Items del carrito -->
                    </div>
                    <div class="border-t pt-4">
                        <p class="text-xl font-bold text-right mb-4">Total: $<span id="cart-total">0.00</span></p>
                        <h3 class="text-lg font-semibold mb-2">Enviar Mensaje para Comprar</h3>
                        <form id="message-form">
                             <textarea id="purchase-message" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700" rows="3" placeholder="Hola, estoy interesado en comprar los artículos de mi carrito..." required></textarea>
                             <button type="submit" class="w-full mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                                Enviar Mensaje
                            </button>
                        </form>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- REFERENCIAS A ELEMENTOS DEL DOM ---
        const views = document.querySelectorAll('.view');
        const loginView = document.getElementById('login-view');
        const adminView = document.getElementById('admin-view');
        const userView = document.getElementById('user-view');

        // Formularios
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const uploadForm = document.getElementById('upload-form');
        const messageForm = document.getElementById('message-form');
        
        // Botones
        const adminLogoutBtn = document.getElementById('admin-logout');
        const userLogoutBtn = document.getElementById('user-logout');
        const cartButton = document.getElementById('cart-button');
        const closeCartModalBtn = document.getElementById('close-cart-modal');

        // Contenedores dinámicos
        const messagesContainer = document.getElementById('messages-container');
        const productsGrid = document.getElementById('products-grid');
        const welcomeUser = document.getElementById('welcome-user');
        
        // Elementos del carrito
        const cartModal = document.getElementById('cart-modal');
        const cartCount = document.getElementById('cart-count');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');

        // Admin form elements
        const formTitle = document.getElementById('form-title');
        const submitUploadBtn = document.getElementById('submit-upload-btn');
        const cancelEditBtn = document.getElementById('cancel-edit-btn');
        const imageNotice = document.getElementById('image-notice');
        const adminProductsList = document.getElementById('admin-products-list');

        // --- ESTADO DE LA APLICACIÓN (Simulando una base de datos con LocalStorage) ---
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let products = JSON.parse(localStorage.getItem('products')) || [
             // Productos de ejemplo por si no hay nada en LocalStorage
            { id: 1, name: 'Laptop Pro', desc: 'Potente laptop para profesionales.', price: 1200, image: 'https://placehold.co/600x400/2d3748/ffffff?text=Laptop' },
            { id: 2, name: 'Smartphone X', desc: 'El último modelo con cámara increíble.', price: 800, image: 'https://placehold.co/600x400/718096/ffffff?text=Smartphone' },
            { id: 3, name: 'Auriculares Inalámbricos', desc: 'Sonido inmersivo sin cables.', price: 150, image: 'https://placehold.co/600x400/4a5568/ffffff?text=Auriculares' }
        ];
        let messages = JSON.parse(localStorage.getItem('messages')) || [];
        let currentUser = JSON.parse(sessionStorage.getItem('currentUser')) || null;
        let cart = JSON.parse(localStorage.getItem(`cart_${currentUser?.code}`)) || [];
        let editingProductId = null; // para saber si estamos editando


        // --- FUNCIONES AUXILIARES ---

        // Función para guardar el estado en LocalStorage
        const saveData = () => {
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('products', JSON.stringify(products));
            localStorage.setItem('messages', JSON.stringify(messages));
            if (currentUser) {
                localStorage.setItem(`cart_${currentUser.code}`, JSON.stringify(cart));
            }
        };

        // Función para cambiar entre vistas
        const showView = (viewId) => {
            views.forEach(view => view.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
        };

        // --- LÓGICA DE RENDERIZADO ---

        // Renderizar productos en la vista de usuario
        const renderProducts = () => {
            productsGrid.innerHTML = '';
            if (products.length === 0) {
                productsGrid.innerHTML = '<p class="col-span-full text-center text-gray-500">No hay productos disponibles en este momento.</p>';
                return;
            }
            products.forEach(product => {
                const productCard = `
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:scale-105 transition-transform duration-300">
                        <img class="w-full h-48 object-cover" src="${product.image}" alt="${product.name}" onerror="this.src='https://placehold.co/600x400/cccccc/ffffff?text=Imagen+no+disponible'">
                        <div class="p-4">
                            <h3 class="text-xl font-bold text-gray-800">${product.name}</h3>
                            <p class="text-gray-600 my-2">${product.desc}</p>
                            <div class="flex justify-between items-center mt-4">
                                <span class="text-2xl font-bold text-blue-600">$${product.price.toFixed(2)}</span>
                                <button class="add-to-cart-btn bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" data-id="${product.id}">
                                    Añadir
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                productsGrid.innerHTML += productCard;
            });
        };

        // Renderizar productos en la vista de admin para administrarlos
        const renderAdminProducts = () => {
            adminProductsList.innerHTML = '';
            if (products.length === 0) {
                adminProductsList.innerHTML = '<p class="text-gray-500">No has subido ningún producto todavía.</p>';
                return;
            }
            [...products].reverse().forEach(product => {
                const productItem = `
                    <div class="flex items-center justify-between border rounded-lg p-3 bg-gray-50">
                        <div class="flex items-center gap-4">
                            <img src="${product.image}" alt="${product.name}" class="w-16 h-16 object-cover rounded-md">
                            <div>
                                <p class="font-bold text-gray-800">${product.name}</p>
                                <p class="text-sm text-green-600 font-semibold">$${product.price.toFixed(2)}</p>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button class="edit-btn bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-1 px-3 rounded text-sm" data-id="${product.id}">Editar</button>
                            <button class="delete-btn bg-red-500 hover:bg-red-600 text-white font-bold py-1 px-3 rounded text-sm" data-id="${product.id}">Eliminar</button>
                        </div>
                    </div>
                `;
                adminProductsList.innerHTML += productItem;
            });
        };

        // Renderizar mensajes en la vista de admin
        const renderMessages = () => {
            messagesContainer.innerHTML = '';
            if (messages.length === 0) {
                 messagesContainer.innerHTML = '<p class="text-gray-500">No hay mensajes nuevos.</p>';
                 return;
            }
            [...messages].reverse().forEach(msg => { // Mostrar los más nuevos primero
                const messageCard = `
                    <div class="border rounded-lg p-4 bg-gray-50">
                        <p class="font-bold text-gray-800">De: ${msg.user}</p>
                        <p class="text-gray-700 mt-2">"${msg.text}"</p>
                        <p class="text-xs text-gray-500 text-right mt-2">${new Date(msg.date).toLocaleString()}</p>
                    </div>
                `;
                messagesContainer.innerHTML += messageCard;
            });
        };
        
        // Renderizar el carrito de compras
        const renderCart = () => {
            cartItemsContainer.innerHTML = '';
            let total = 0;
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-gray-500">Tu carrito está vacío.</p>';
            } else {
                 cart.forEach(item => {
                    const cartItemHTML = `
                        <div class="flex justify-between items-center border-b py-2">
                            <div>
                                <p class="font-semibold">${item.name}</p>
                                <p class="text-sm text-gray-600">$${item.price.toFixed(2)}</p>
                            </div>
                            <button class="remove-from-cart-btn text-red-500 hover:text-red-700 font-bold" data-id="${item.id}">&times;</button>
                        </div>
                    `;
                    cartItemsContainer.innerHTML += cartItemHTML;
                    total += item.price;
                });
            }
            cartCount.textContent = cart.length;
            cartTotal.textContent = total.toFixed(2);
        };

        const resetUploadForm = () => {
            uploadForm.reset();
            editingProductId = null;
            formTitle.textContent = 'Subir Nuevo Artículo';
            submitUploadBtn.textContent = 'Subir Producto';
            submitUploadBtn.classList.remove('bg-green-500', 'hover:bg-green-700');
            submitUploadBtn.classList.add('bg-blue-500', 'hover:bg-blue-700');
            cancelEditBtn.classList.add('hidden');
            imageNotice.classList.add('hidden');
             // Asegurarse de que el input de archivo sea requerido de nuevo para subidas nuevas
            document.getElementById('product-image').required = true;
        };

        // --- LÓGICA DE AUTENTICACIÓN ---

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const code = document.getElementById('login-code').value;
            const password = document.getElementById('login-password').value;

            // Lógica para el admin
            if (code === '1234' && password === '1234') {
                currentUser = { code: 'admin', type: 'admin' };
                sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                showView('admin-view');
                renderMessages();
                renderAdminProducts();
                return;
            }
            
            // Lógica para usuarios
            const user = users.find(u => u.code === code && u.password === password);
            if (user) {
                currentUser = user;
                sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                cart = JSON.parse(localStorage.getItem(`cart_${currentUser.code}`)) || [];
                initializeAppUser();
            } else {
                alert('Código o contraseña incorrectos.');
            }
        });

        registerForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const code = document.getElementById('register-code').value;
            const password = document.getElementById('register-password').value;

            if (users.some(u => u.code === code)) {
                alert('Este nombre de usuario ya existe.');
                return;
            }

            const newUser = { code, password, type: 'user' };
            users.push(newUser);
            currentUser = newUser;
            sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
            cart = [];
            saveData();
            initializeAppUser();
        });
        
        const logout = () => {
            currentUser = null;
            sessionStorage.removeItem('currentUser');
            cart = [];
            showView('login-view');
            // Limpiar formularios
            loginForm.reset();
            registerForm.reset();
        };

        adminLogoutBtn.addEventListener('click', () => {
            logout();
            resetUploadForm();
        });
        userLogoutBtn.addEventListener('click', logout);


        // --- LÓGICA DEL ADMINISTRADOR ---

        uploadForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const name = document.getElementById('product-name').value;
            const desc = document.getElementById('product-desc').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const imageFile = document.getElementById('product-image').files[0];

            const handleProductSave = (imageUrl) => {
                if (editingProductId) {
                    // --- Lógica de Actualización ---
                    const productIndex = products.findIndex(p => p.id === editingProductId);
                    if (productIndex > -1) {
                        products[productIndex].name = name;
                        products[productIndex].desc = desc;
                        products[productIndex].price = price;
                        if (imageUrl) {
                            products[productIndex].image = imageUrl;
                        }
                    }
                    alert('Producto actualizado con éxito!');
                } else {
                    // --- Lógica de Creación ---
                     if (!imageUrl) {
                        alert('Por favor, selecciona un archivo de imagen.');
                        return;
                    }
                    const newProduct = {
                        id: Date.now(),
                        name: name,
                        desc: desc,
                        price: price,
                        image: imageUrl,
                    };
                    products.push(newProduct);
                    alert('Producto subido con éxito!');
                }
                saveData();
                renderProducts();
                renderAdminProducts();
                resetUploadForm();
            };

            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    handleProductSave(event.target.result);
                };
                reader.readAsDataURL(imageFile);
            } else {
                 if (editingProductId) {
                    // Si estamos editando y no hay imagen nueva, pasamos null
                    handleProductSave(null);
                } else {
                    // Si estamos creando, la imagen es requerida
                    alert('Por favor, selecciona un archivo de imagen.');
                }
            }
        });

        // Event listener para botones de editar y eliminar
        adminProductsList.addEventListener('click', (e) => {
            const target = e.target;
            const productId = parseInt(target.dataset.id);

            // Eliminar producto
            if (target.classList.contains('delete-btn')) {
                products = products.filter(p => p.id !== productId);
                saveData();
                renderProducts();
                renderAdminProducts();
                // Si el producto eliminado era el que se estaba editando, resetear el form
                if (editingProductId === productId) {
                    resetUploadForm();
                }
            }

            // Editar producto
            if (target.classList.contains('edit-btn')) {
                const productToEdit = products.find(p => p.id === productId);
                if (productToEdit) {
                    editingProductId = productId;
                    document.getElementById('product-name').value = productToEdit.name;
                    document.getElementById('product-desc').value = productToEdit.desc;
                    document.getElementById('product-price').value = productToEdit.price;
                    
                    formTitle.textContent = 'Editando Artículo';
                    submitUploadBtn.textContent = 'Actualizar Producto';
                    submitUploadBtn.classList.remove('bg-blue-500', 'hover:bg-blue-700');
                    submitUploadBtn.classList.add('bg-green-500', 'hover:bg-green-700');
                    cancelEditBtn.classList.remove('hidden');
                    imageNotice.classList.remove('hidden');
                    // La imagen no es requerida al editar
                    document.getElementById('product-image').required = false;

                    // Scroll hacia el formulario de edición
                    uploadForm.scrollIntoView({ behavior: 'smooth' });
                }
            }
        });

        cancelEditBtn.addEventListener('click', () => {
            resetUploadForm();
        });


        // --- LÓGICA DEL USUARIO ---
        
        // Añadir al carrito
        productsGrid.addEventListener('click', (e) => {
            if (e.target.classList.contains('add-to-cart-btn')) {
                const productId = parseInt(e.target.dataset.id);
                const productToAdd = products.find(p => p.id === productId);
                if (productToAdd) {
                    cart.push(productToAdd);
                    saveData();
                    renderCart();
                }
            }
        });
        
        // Quitar del carrito
        cartItemsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('remove-from-cart-btn')) {
                const productId = parseInt(e.target.dataset.id);
                const itemIndex = cart.findIndex(item => item.id === productId);
                if (itemIndex > -1) {
                    cart.splice(itemIndex, 1);
                    saveData();
                    renderCart();
                }
            }
        });
        
        // Enviar mensaje de compra
        messageForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const text = document.getElementById('purchase-message').value;
            
            const newMessage = {
                user: currentUser.code,
                text: text,
                date: new Date().toISOString()
            };
            
            messages.push(newMessage);
            saveData();
            alert('Mensaje enviado con éxito al vendedor.');
            messageForm.reset();
            cartModal.classList.add('hidden');
        });

        // Abrir y cerrar modal del carrito
        cartButton.addEventListener('click', () => cartModal.classList.remove('hidden'));
        closeCartModalBtn.addEventListener('click', () => cartModal.classList.add('hidden'));
        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) {
                cartModal.classList.add('hidden');
            }
        });


        // --- INICIALIZACIÓN DE LA APLICACIÓN ---
        
        const initializeAppUser = () => {
             welcomeUser.textContent = `Hola, ${currentUser.code}!`;
             showView('user-view');
             renderProducts();
             renderCart();
        };

        // Comprobar si hay un usuario logueado al cargar la página
        if (currentUser) {
            if (currentUser.type === 'admin') {
                showView('admin-view');
                renderMessages();
                renderAdminProducts();
            } else {
                initializeAppUser();
            }
        } else {
            showView('login-view');
        }
    });
    </script>
</body>
</html>


